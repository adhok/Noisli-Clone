<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco-Focus | Bio-Dome</title>
    <style>
        /* RESET & BASE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        html {
            height: 100%;
            font-family: 'Segoe UI', Roboto, monospace;
            background-color: transparent;
            color: white;
            overflow-y: auto;
        }

        /* DYNAMIC BACKGROUND */
        .bg-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f1215 url('img/japan_temple.avif') center/cover;
            filter: brightness(0.4);
            z-index: -1;
        }

        /* MAIN LAYOUT */
        /* MAIN LAYOUT */
        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 130px 20px 40px;
            gap: 30px;
        }

        /* --- TIMER BAR STYLES --- */
        .timer-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 90px;
            background: rgba(60, 65, 70, 0.5);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .timer-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .app-title {
            font-weight: bold;
            font-size: 1.1rem;
            color: white;
            letter-spacing: 1px;
        }

        .timer-label {
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.75rem;
            color: #888;
            font-weight: bold;
        }

        .timer-display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 3.5rem;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            line-height: 1;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .timer-controls-group {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .timer-settings {
            display: flex;
            gap: 15px;
        }

        .setting-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .setting-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            color: #666;
            margin: 0;
        }

        .timer-input {
            width: 50px;
            padding: 4px 5px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            color: #00ff88;
            text-align: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .timer-input:focus {
            outline: none;
            border-color: rgba(0, 255, 136, 0.4);
            background: rgba(0, 255, 136, 0.05);
        }

        .timer-controls {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: #ccc;
            cursor: pointer;
            transition: 0.2s;
            font-size: 0.85rem;
            text-transform: uppercase;
            font-weight: 600;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: white;
        }

        .btn-primary {
            background: rgba(0, 255, 136, 0.15);
            border-color: rgba(0, 255, 136, 0.4);
            color: #00ff88;
        }

        .btn-primary:hover {
            background: #00ff88;
            color: #000;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.4);
        }

        /* --- VIEW SWITCHER --- */
        .view-switcher {
            display: flex;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 50px;
            padding: 5px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
        }

        .switch-btn {
            background: transparent;
            border: none;
            color: #888;
            padding: 10px 25px;
            border-radius: 40px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            font-size: 0.9rem;
        }

        .switch-btn.active {
            background: #00ff88;
            color: #0f1215;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.4);
        }

        .switch-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            text-decoration: line-through;
        }

        /* --- SOUND GRID STYLES --- */
        .sound-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            width: 100%;
            max-width: 700px;
        }

        .sound-card {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            height: 180px;
        }

        .sound-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .sound-card.active {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.08);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.1);
        }

        .icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
            transition: 0.3s;
            filter: grayscale(100%);
        }

        .sound-card.active .icon {
            opacity: 1;
            transform: scale(1.1);
            filter: grayscale(0%);
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.6);
        }

        .status-text {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            color: #666;
            font-weight: bold;
        }

        .sound-card.active .status-text {
            color: #00ff88;
        }

        /* Volume Slider */
        .slider-wrapper {
            width: 100%;
            opacity: 0.3;
            transition: 0.3s;
            pointer-events: none;
        }

        .sound-card.active .slider-wrapper {
            opacity: 1;
            pointer-events: all;
        }

        input[type=range] {
            width: 100%;
            -webkit-appearance: none;
            background: transparent;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            margin-top: -6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        /* --- GAME CONTAINER --- */
        .game-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid #00bcd4;
            border-radius: 10px;
            overflow: hidden;
            display: none;
            /* Hidden by default */
            box-shadow: 0 0 30px rgba(0, 188, 212, 0.2);
        }

        canvas {
            width: 100%;
            display: block;
        }

        .game-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 0 10px #000;
            text-align: center;
            width: 100%;
        }

        .game-score {
            position: absolute;
            top: 10px;
            left: 15px;
            color: #00bcd4;
            font-family: monospace;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* --- STOP ALL BUTTON --- */
        .stop-all-btn {
            background: transparent;
            border: 1px solid #ff4444;
            color: #ff4444;
            padding: 12px 30px;
            border-radius: 50px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.75rem;
            transition: 0.3s;
            font-weight: bold;
            margin-top: 20px;
        }

        .stop-all-btn:hover {
            background: #ff4444;
            color: white;
            box-shadow: 0 0 25px rgba(255, 68, 68, 0.4);
        }

        @media (max-width: 600px) {
            .sound-grid {
                grid-template-columns: 1fr;
            }

            .timer-display {
                font-size: 3.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="bg-image"></div>

    <nav class="timer-bar">
        <div class="timer-info">
            <div class="app-title">ECO-FOCUS | BIO-DOME</div>
            <div class="timer-label" id="timer-mode">System Focus</div>
        </div>

        <div class="timer-display" id="time-display">25:00</div>

        <div class="timer-controls-group">
            <div class="timer-settings">
                <div class="setting-group">
                    <label class="setting-label">Work</label>
                    <input type="number" class="timer-input" id="work-duration" min="5" max="60" value="25"
                        onchange="updateWorkDuration(this.value)">
                </div>
                <div class="setting-group">
                    <label class="setting-label">Break</label>
                    <input type="number" class="timer-input" id="break-duration" min="1" max="60" value="5"
                        onchange="updateBreakDuration(this.value)">
                </div>
            </div>

            <div class="timer-controls">
                <button class="btn btn-primary" id="start-btn" onclick="toggleTimer()">Start</button>
                <button class="btn" onclick="resetTimer()">Reset</button>
                <button class="btn" id="mode-btn" onclick="switchMode()">Break</button>
            </div>
        </div>
    </nav>

    <div class="container">

        <div class="view-switcher">
            <button class="switch-btn active" id="btn-view-audio" onclick="setView('audio')">Soundboard</button>
            <button class="switch-btn" id="btn-view-game" onclick="setView('game')" disabled>
                üëæ Break Game <span id="game-lock-status" style="font-size:0.8em; margin-left:5px;">(Locked)</span>
            </button>
        </div>

        <div class="sound-grid" id="view-audio">

            <div class="sound-card" id="card-forest" onclick="toggleSound('forest', 'card-forest')">
                <div class="icon">üå≤</div>
                <div class="status-text">OFF</div>
                <div class="slider-wrapper" onclick="event.stopPropagation()">
                    <input type="range" min="0" max="1" step="0.01" value="0.5"
                        oninput="setVolume('forest', this.value)">
                </div>
                <audio id="forest" loop preload="auto" src="sounds/forest_sounds.mp3"></audio>
            </div>

            <div class="sound-card" id="card-rain" onclick="toggleSound('rain', 'card-rain')">
                <div class="icon">üåßÔ∏è</div>
                <div class="status-text">OFF</div>
                <div class="slider-wrapper" onclick="event.stopPropagation()">
                    <input type="range" min="0" max="1" step="0.01" value="0.5" oninput="setVolume('rain', this.value)">
                </div>
                <audio id="rain" loop preload="auto" src="sounds/rain_sounds.mp3"></audio>
            </div>

            <div class="sound-card" id="card-birds" onclick="toggleSound('birds', 'card-birds')">
                <div class="icon">ü¶ú</div>
                <div class="status-text">OFF</div>
                <div class="slider-wrapper" onclick="event.stopPropagation()">
                    <input type="range" min="0" max="1" step="0.01" value="0.5"
                        oninput="setVolume('birds', this.value)">
                </div>
                <audio id="birds" loop preload="auto" src="sounds/bird_sounds.mp3"></audio>
            </div>

            <div class="sound-card" id="card-water" onclick="toggleSound('water', 'card-water')">
                <div class="icon">üåä</div>
                <div class="status-text">OFF</div>
                <div class="slider-wrapper" onclick="event.stopPropagation()">
                    <input type="range" min="0" max="1" step="0.01" value="0.5"
                        oninput="setVolume('water', this.value)">
                </div>
                <audio id="water" loop preload="auto" src="sounds/wave_sounds.mp3"></audio>
            </div>

        </div>

        <div class="game-container" id="view-game">
            <canvas id="gameCanvas" width="600" height="400"></canvas>
            <div class="game-overlay" id="game-start-msg">Press SPACE to Start</div>
            <div class="game-score">Score: <span id="score-display">0</span></div>
        </div>

        <button class="stop-all-btn" onclick="stopAllSounds()">Shutdown Audio</button>

    </div>

    <script>
        // --- 1. LOCAL STORAGE & INIT ---
        window.onload = function () {
            if (localStorage.getItem('workDuration')) {
                const savedWork = localStorage.getItem('workDuration');
                document.getElementById('work-duration').value = savedWork;
                updateWorkDuration(savedWork);
            }
            if (localStorage.getItem('breakDuration')) {
                const savedBreak = localStorage.getItem('breakDuration');
                document.getElementById('break-duration').value = savedBreak;
                updateBreakDuration(savedBreak);
            }

            // --- PREVENT ACCIDENTAL PAUSE (Earbuds/Media Keys) ---
            if ('mediaSession' in navigator) {
                navigator.mediaSession.setActionHandler('play', function () { });
                navigator.mediaSession.setActionHandler('pause', function () {
                    console.log('External pause intercepted.');
                });
                navigator.mediaSession.setActionHandler('stop', function () { });
                navigator.mediaSession.setActionHandler('previoustrack', function () { });
                navigator.mediaSession.setActionHandler('nexttrack', function () { });
            }

            window.addEventListener('keydown', function (e) {
                if (e.key === 'MediaPlayPause' || e.key === 'MediaStop') {
                    e.preventDefault();
                }
            });
        }

        // --- 2. AUDIO LOGIC ---

        function toggleSound(audioId, cardId) {
            const audio = document.getElementById(audioId);
            const card = document.getElementById(cardId);
            const statusText = card.querySelector('.status-text');

            if (!audio) return;

            const isActive = card.classList.contains('active');

            if (isActive) {
                audio.pause();
                audio.currentTime = 0;
                card.classList.remove('active');
                statusText.innerText = "OFF";
                audio.dataset.fading = "false";
            } else {
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        card.classList.add('active');
                        statusText.innerText = "ACTIVE";
                        audio.dataset.fading = "false";
                        const slider = card.querySelector('input[type=range]');
                        audio.volume = slider.value;
                    }).catch(error => console.error("Playback failed:", error));
                }
            }
        }

        function setVolume(audioId, volValue) {
            const audio = document.getElementById(audioId);
            if (audio.dataset.fading !== "true") {
                audio.volume = volValue;
            }
        }

        function stopAllSounds() {
            ['forest', 'rain', 'birds', 'water'].forEach(id => {
                const audio = document.getElementById(id);
                if (audio) {
                    audio.pause();
                    audio.currentTime = 0;
                    const card = document.getElementById('card-' + id);
                    if (card) {
                        card.classList.remove('active');
                        card.querySelector('.status-text').innerText = "OFF";
                    }
                }
            });
        }

        function fadeOutAndStop() {
            const activeAudios = [];
            document.querySelectorAll('audio').forEach(a => {
                if (!a.paused) {
                    a.dataset.fading = "true";
                    activeAudios.push(a);
                }
            });

            if (activeAudios.length === 0) return;

            let fadeInterval = setInterval(() => {
                let stillFading = false;
                activeAudios.forEach(a => {
                    if (a.volume > 0.05) {
                        a.volume -= 0.05;
                        stillFading = true;
                    } else {
                        a.volume = 0;
                    }
                });

                if (!stillFading) {
                    clearInterval(fadeInterval);
                    activeAudios.forEach(a => {
                        a.pause();
                        a.dataset.fading = "false";
                        const card = document.getElementById('card-' + a.id);
                        a.volume = card.querySelector('input').value;
                        card.classList.remove('active');
                        card.querySelector('.status-text').innerText = "OFF";
                    });
                }
            }, 100);
        }

        // --- 3. TIMER & STATE MANAGEMENT ---
        let timer;
        let isRunning = false;
        let timeLeft = 25 * 60;
        let isBreak = false;
        let workDuration = 25;
        let breakDuration = 5;
        let gameEnabled = false;

        const timeDisplay = document.getElementById('time-display');
        const startBtn = document.getElementById('start-btn');
        const modeLabel = document.getElementById('timer-mode');
        const modeBtn = document.getElementById('mode-btn');

        function updateDisplay() {
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            const timeString = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            timeDisplay.textContent = timeString;
            document.title = isRunning ? `(${timeString}) Eco-Focus` : "Eco-Focus | Bio-Dome";
        }

        function updateWorkDuration(value) {
            let duration = parseInt(value);
            if (duration < 5) duration = 5;
            workDuration = duration;
            localStorage.setItem('workDuration', duration);
            if (!isBreak && !isRunning) {
                timeLeft = workDuration * 60;
                updateDisplay();
            }
        }

        function updateBreakDuration(value) {
            let duration = parseInt(value);
            if (duration < 1) duration = 1;
            breakDuration = duration;
            localStorage.setItem('breakDuration', duration);
            if (isBreak && !isRunning) {
                timeLeft = breakDuration * 60;
                updateDisplay();
            }
        }

        function toggleTimer() {
            if (isRunning) {
                clearInterval(timer);
                startBtn.textContent = "Start";
                startBtn.classList.remove('btn-primary');
            } else {
                timer = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateDisplay();
                    } else {
                        clearInterval(timer);
                        isRunning = false;
                        startBtn.textContent = "Start";
                        startBtn.classList.remove('btn-primary');
                        fadeOutAndStop();
                        if (isBreak) switchMode();
                    }
                }, 1000);
                startBtn.textContent = "Pause";
                startBtn.classList.add('btn-primary');
            }
            isRunning = !isRunning;
            updateDisplay();
        }

        function resetTimer() {
            clearInterval(timer);
            isRunning = false;
            startBtn.textContent = "Start";
            startBtn.classList.remove('btn-primary');
            timeLeft = isBreak ? breakDuration * 60 : workDuration * 60;
            updateDisplay();
        }

        function switchMode() {
            isBreak = !isBreak;
            resetTimer();

            const gameBtn = document.getElementById('btn-view-game');
            const lockStatus = document.getElementById('game-lock-status');

            if (isBreak) {
                // BREAK MODE
                timeLeft = breakDuration * 60;
                modeLabel.textContent = "System Cool-down";
                modeLabel.style.color = "#00bcd4";
                modeBtn.textContent = "Back to Work";
                gameEnabled = true;
                gameBtn.disabled = false;
                lockStatus.innerText = "(Ready)";
                lockStatus.style.color = "#00bcd4";
            } else {
                // WORK MODE
                timeLeft = workDuration * 60;
                modeLabel.textContent = "System Focus";
                modeLabel.style.color = "#888";
                modeBtn.textContent = "Break";
                setView('audio'); // Force back to audio
                gameEnabled = false;
                gameBtn.disabled = true;
                lockStatus.innerText = "(Locked)";
                lockStatus.style.color = "#666";
            }
            updateDisplay();
        }

        function setView(viewName) {
            document.getElementById('view-audio').style.display = viewName === 'audio' ? 'grid' : 'none';
            document.getElementById('view-game').style.display = viewName === 'game' ? 'block' : 'none';

            document.getElementById('btn-view-audio').classList.toggle('active', viewName === 'audio');
            document.getElementById('btn-view-game').classList.toggle('active', viewName === 'game');

            if (viewName === 'game' && gameEnabled) {
                initGame();
            } else {
                stopGame();
            }
        }

        // --- 4. GAME ENGINE ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let gameLoopId;
        let score = 0;
        let frameCount = 0;
        let player = { x: 280, y: 360, w: 30, h: 20, color: '#00bcd4' };
        let bullets = [];
        let enemies = [];
        let keys = {};
        let gameRunning = false;
        let baseSpeed = 2;

        window.addEventListener('keydown', e => {
            keys[e.code] = true;
            if (e.code === 'Space' && document.getElementById('view-game').style.display === 'block') {
                e.preventDefault();
                if (!gameRunning && gameEnabled) startGameLoop();
                else if (gameRunning) fireBullet();
            }
        });
        window.addEventListener('keyup', e => keys[e.code] = false);

        function initGame() {
            score = 0;
            frameCount = 0;
            baseSpeed = 2;
            document.getElementById('score-display').innerText = score;
            document.getElementById('game-start-msg').style.display = "block";
            document.getElementById('game-start-msg').innerText = "Press SPACE to Start";

            enemies = [];
            for (let r = 0; r < 4; r++) {
                for (let c = 0; c < 8; c++) {
                    enemies.push({
                        x: 50 + c * 60,
                        y: 30 + r * 40,
                        w: 30, h: 20,
                        alive: true,
                        mode: 'formation',
                        formationX: 50 + c * 60,
                        formationY: 30 + r * 40
                    });
                }
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            draw();
        }

        function startGameLoop() {
            if (!gameEnabled) return;
            gameRunning = true;
            document.getElementById('game-start-msg').style.display = "none";
            loop();
        }

        function stopGame() {
            gameRunning = false;
            cancelAnimationFrame(gameLoopId);
        }

        function fireBullet() {
            bullets.push({ x: player.x + 12, y: player.y, w: 6, h: 10 });
        }

        function updateGame() {
            frameCount++;

            // Player
            if (keys['ArrowLeft'] && player.x > 0) player.x -= 5;
            if (keys['ArrowRight'] && player.x < canvas.width - player.w) player.x += 5;

            // Bullets
            bullets.forEach((b, i) => {
                b.y -= 7;
                if (b.y < 0) bullets.splice(i, 1);
            });

            // Enemies Logic
            const globalSpeed = baseSpeed + (score / 100);
            const waveOffset = Math.sin(frameCount * 0.05) * 10;

            // Direction for formation (switch every 200 frames)
            let dir = Math.floor(frameCount / 200) % 2 === 0 ? 1 : -1;

            enemies.forEach(e => {
                if (!e.alive) return;

                if (e.mode === 'formation') {
                    e.x += globalSpeed * dir;
                    e.y = e.formationY + waveOffset; // Oscillation
                }

                if (e.mode === 'diving') {
                    e.y += globalSpeed * 2.5;
                    // Homing
                    if (e.x < player.x) e.x += 1; else e.x -= 1;
                    // Loop
                    if (e.y > canvas.height) {
                        e.mode = 'formation';
                        e.y = 0;
                    }
                }
            });

            // Trigger Random Dives
            if (frameCount % 100 === 0) {
                const living = enemies.filter(e => e.alive && e.mode === 'formation');
                if (living.length > 0) {
                    living[Math.floor(Math.random() * living.length)].mode = 'diving';
                }
            }

            // Collisions
            bullets.forEach((b, bi) => {
                enemies.forEach((e, ei) => {
                    if (e.alive && b.x < e.x + e.w && b.x + b.w > e.x &&
                        b.y < e.y + e.h && b.h + b.y > e.y) {
                        e.alive = false;
                        bullets.splice(bi, 1);
                        score += 10;
                        document.getElementById('score-display').innerText = score;
                    }
                });
            });
        }

        function draw() {
            ctx.fillStyle = '#0f1215';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Player
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.w, player.h);

            // Bullets
            ctx.fillStyle = '#fff';
            bullets.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));

            // Enemies
            enemies.forEach(e => {
                if (e.alive) {
                    if (e.mode === 'diving') {
                        ctx.fillStyle = '#ff00ff'; // Purple Divers
                        ctx.fillRect(e.x, e.y, e.w, e.h);
                        ctx.fillStyle = '#fff'; // Big Eyes
                        ctx.fillRect(e.x + 5, e.y + 8, 8, 8);
                        ctx.fillRect(e.x + 18, e.y + 8, 8, 8);
                    } else {
                        ctx.fillStyle = '#ff4444'; // Red Standard
                        ctx.fillRect(e.x, e.y, e.w, e.h);
                        ctx.fillStyle = '#000'; // Small Eyes
                        ctx.fillRect(e.x + 5, e.y + 5, 5, 5);
                        ctx.fillRect(e.x + 20, e.y + 5, 5, 5);
                    }
                }
            });
        }

        function loop() {
            if (!gameRunning) return;
            updateGame();
            draw();
            gameLoopId = requestAnimationFrame(loop);
        }

        updateDisplay();
    </script>
</body>

</html>